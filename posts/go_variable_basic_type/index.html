<!doctype html><html lang=en><head><title>Golang 基础语法-变量及作用域 · Stephen’s Life</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="StephenZzz"><meta name=description content="Golang 基本类型及变量声明"><meta name=keywords content="blog,developer,personal,ruby,golang"><meta name=twitter:card content="summary"><meta name=twitter:title content="Golang 基础语法-变量及作用域"><meta name=twitter:description content="Golang 基本类型及变量声明"><meta property="og:title" content="Golang 基础语法-变量及作用域"><meta property="og:description" content="Golang 基本类型及变量声明"><meta property="og:type" content="article"><meta property="og:url" content="https://stephenz22.github.io/posts/go_variable_basic_type/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-20T23:06:29+08:00"><meta property="article:modified_time" content="2023-03-20T23:06:29+08:00"><link rel=canonical href=https://stephenz22.github.io/posts/go_variable_basic_type/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.0669b62fc2c181a12a4ba10be9984e385c9a5e83dc7cb7ae3759ad0b98d7e8b2.css integrity="sha256-Bmm2L8LBgaEqS6EL6ZhOOFyaXoPcfLeuN1mtC5jX6LI=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.113.0"></head><body class="preload-transitions colorscheme-light"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Stephen’s Life</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://stephenz22.github.io/posts/go_variable_basic_type/>Golang 基础语法-变量及作用域</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2023-03-20T23:06:29+08:00>March 20, 2023</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
One-minute read</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/categories/golang/>Golang</a></div></div></header><div class=post-content><h2 id=变量声明>变量声明
<a class=heading-link href=#%e5%8f%98%e9%87%8f%e5%a3%b0%e6%98%8e><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>在<code>Goalng</code>中声明变量有两种形式一种为标准形式，一种为短声明形式。标准形式的变量声明需要用到的<code>var</code>关键字。每个<code>var</code>关键字后面跟随一个变量名。下面演示这两种变量声明形式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// go_variable_basic.go
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 在函数外部声明的变量为全局变量或者包变量
</span></span></span><span style=display:flex><span><span style=color:#75715e>// 在函数内部声明的变量为局部变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 标准形式 全局变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>addr</span> <span style=color:#66d9ef>string</span> = <span style=color:#e6db74>&#34;张学友&#34;</span>, <span style=color:#e6db74>&#34;中国香港&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>62</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 标准形式利用类型推断
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>school</span> = <span style=color:#e6db74>&#34;北京大学&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>since</span> = <span style=color:#ae81ff>1898</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 标准形式的省略初始值, 利用各自类型的默认值声明
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>language</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>compiled</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>number</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>addr</span>, <span style=color:#a6e22e>age</span>, <span style=color:#a6e22e>school</span>, <span style=color:#a6e22e>language</span>, <span style=color:#a6e22e>compiled</span>, <span style=color:#a6e22e>number</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 短声明形式只可在函数内部使用，用来声明局部变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 注意！！！
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// golang 当一个局部变量被声明之后至少要被使用一次
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 否则编译器将会报错， 全局变量则不受此限制
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>bookName</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;局外人&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>bookName</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go run go_variable_basic.go
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>张学友 中国香港 <span style=color:#ae81ff>62</span> 北京大学  false <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>局外人
</span></span></code></pre></div><h3 id=变量和常量的作用域>变量和常量的作用域
<a class=heading-link href=#%e5%8f%98%e9%87%8f%e5%92%8c%e5%b8%b8%e9%87%8f%e7%9a%84%e4%bd%9c%e7%94%a8%e5%9f%9f><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>在 Golang 一对大括号来显式形成一个（局部）代码块。一个代码块可以内嵌另一个代码块。 最外层的代码块称为包级代码块。 一个声明在一个内层代码块中的常量或者变量将遮挡另一个外层代码块中声明的同名变量或者常量。</p><p>下面的代码中声明了 3 个名为 a 的变量。 内层的 a 将遮挡外层的 a.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>//  go_variable_basic02.go
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>b</span> = <span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> = <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 这里的a 函数外部的全局变量（同名）进行了遮挡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>a</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 重新声明 左边的a b
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>//右边的a 为当前代码块外层的bool类型的a
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 右边的b 为 全局变量 const b
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>c</span> <span style=color:#f92672>:=</span> !<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>c</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>a</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// fmt.Println(c) 编译报错 c 由上文代码块定义外部不可见
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go run go_variable_basic02.go
</span></span><span style=display:flex><span>false <span style=color:#ae81ff>40</span> <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>true
</span></span><span style=display:flex><span><span style=color:#ae81ff>50</span>
</span></span></code></pre></div><p>一个全局变量或者常量的作用域为其所处于的整个代码包。 一个局部变量或者常量的作用域开始于此变量或者常量的声明的下一行，结束于最内层包含此变量或者常量的声明语句的代码块的结尾。 这解释了为什么上例中的 fmt.Println(c)将编译不通过。</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2020 -
2023
StephenZzz
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>